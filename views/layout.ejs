<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <head>
        <title>Twalks</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

        <link rel="stylesheet" href="http://twitter.github.com/bootstrap/assets/css/bootstrap-1.1.1.min.css">

        <link href="http://fonts.googleapis.com/css?family=Leckerli+One:400normal&amp;subset=all" rel="stylesheet" type="text/css">
        <link href='http://fonts.googleapis.com/css?family=Nothing+You+Could+Do' rel='stylesheet' type='text/css'>

        <link rel="stylesheet" href="/stylesheets/style.css">

        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
        <script src="/javascripts/underscore.js"></script>
        <script src="/javascripts/backbone.js"></script>
        <script src="/javascripts/date.format.js"></script>
        <script src="/javascripts/twalks.js"></script>

        <script type="text/template" id="welcome-template">
            <div id="intro" class="row">
                <div class="span4 columns search">
                    <h4>Search for an<br/>&nbsp;&nbsp;event</h4>
                </div>
                <div class="span4 columns create">
                    <h4>or <a href="#">Log in</a> &amp; <a href="#">create<br/>&nbsp;&nbsp;a new one</a></h4>
                </div>
                <div class="span4 columns tweet">
                    <h4>Tweet with event<br/>&nbsp;&nbsp;&amp; session <span class="hashtag">#tags</span></h4>
                </div>
                <div class="span4 columns view">
                    <h4>Observe events<br/>&nbsp;&nbsp;&amp; sessions</h4>
                </div>

                <div class="logo">
                    <h1>Twalks</h1>
                    <h2>Making sense from your conference tweets</h2>
                </div>
            </div>
        </script>

        <script type="text/template" id="event-show-template">
            <div id="event-show" class="row">
                <section class="span16 columns item">
                    <article>
                        <header class="map">
                        {% if (typeof location != 'undefined') { %}
                            <img width="300" height="300" src="http://maps.google.com/maps/api/staticmap?center={{ location }}&markers=size:mid|color:blue|{{ location }}&zoom=13&size=300x300&sensor=false" />
                        {% } else { %}
                            <img width="300" height="300" src="http://maps.google.com/maps/api/staticmap?center=Unknown&markers=size:mid|color:blue|Unknown&zoom=13&size=300x300&sensor=false" />
                        {% } %}
                        </header>
                        <section>
                            <img width="90px" height="90px" class="image" src="{{ imageUrl }}" />
                            <h1>
                                {% if (typeof name != 'undefined') { %}
                                    {{ name }}
                                {% } else { %}
                                    Noname
                                {% } %}
                                {% if (typeof hash != 'undefined') { %}
                                    <small>{{ hash }}</small>
                                {% } %}
                            </h1>
                            <ul class="infobar">
                                <li class="time-precise">
                                    {% if (typeof startsAt != 'undefined') { %}
                                        {{ dateFormat(startsAt, 'yyyy-mm-dd, h:MM') }}
                                    {% } else { %}
                                        xxxx-xx-xx, x:xx
                                    {% } %}
                                    &mdash;
                                    {% if (typeof endsAt != 'undefined') { %}
                                        {{ dateFormat(endsAt, 'yyyy-mm-dd, h:MM') }}
                                    {% } else { %}
                                        xxxx-xx-xx, x:xx
                                    {% } %}
                                </li>
                                {% if (typeof location != 'undefined') { %}
                                    <li class="place">
                                        {{ location }}
                                    </li>
                                {% } %}
                                <li class="author">
                                    {% if (typeof author != 'undefined') { %}
                                        <a href="https://twitter.com/{{ author }}">@{{ author }}</a>
                                    {% } else { %}
                                        anonymous
                                    {% } %}
                                </li>
                            </ul>

                            <hr />

                            <p>
                                {% if (typeof description != 'undefined') { %}
                                    {{ description }}
                                {% } else { %}
                                    No description provided
                                {% } %}
                            </p>

                            <footer class="lists">
                                <ul class="tabs">
                                    <li class="talks"><a href="javascript:void(0)">Talks</a></li>
                                    <li class="tweets"><a href="javascript:void(0)">Tweets</a></li>
                                </ul>

                                <div class="event-footer-content"></div>

                            </footer>
                        </section>
                    </article>
                </section>
            </div>
        </script>

        <script type="text/template" id="talk-template">
            <div id="event-show" class="row">
                <section class="span16 columns item">
                    <article>
                        <header class="map">
                            <span class="time">
                                {% if (typeof startsAt !== 'undefined') { %}
                                    {{ dateFormat(startsAt, 'd mmmm') }}<br/>
                                    <i>{{ dateFormat(startsAt, 'h:MM') }}</i>
                                {% } else { %}
                                    anytime
                                {% } %}
                            </span>
                            {% if (typeof event.location != 'undefined') { %}
                                <img width="300" height="300" src="http://maps.google.com/maps/api/staticmap?center={{ event.location }}&zoom=13&size=300x300&sensor=false" />
                            {% } else { %}
                                <img width="300" height="300" src="http://maps.google.com/maps/api/staticmap?center=Unknown&zoom=13&size=300x300&sensor=false" />
                            {% } %}
                        </header>
                        <section>
                            <h1>
                                {% if (typeof name != 'undefined') { %}
                                    {{ name }}
                                {% } else { %}
                                    Noname
                                {% } %}
                                {% if (typeof hash != 'undefined') { %}
                                    <small>{{ hash }}</small>
                                {% } %}
                            </h1>
                            <h3>
                                {% if (typeof event.name != 'undefined') { %}
                                    {{ event.name }}
                                {% } else { %}
                                    Noname
                                {% } %}
                                {% if (typeof event.hash != 'undefined') { %}
                                    <small>{{ event.hash }}</small>
                                {% } %}
                            </h3>
                            <ul class="infobar">
                                {% if (typeof event.location != 'undefined') { %}
                                    <li class="place">
                                        {{ event.location }}
                                    </li>
                                {% } %}
                                {% if (typeof speakers != 'undefined') { %}
                                    <li class="author">
                                        {% _.each(speakers, function(speaker) { %}
                                            <a href="https://twitter.com/{{ speaker }}">
                                                @{{ speaker }}
                                            </a>
                                        {% }); %}
                                    </li>
                                {% } %}
                            </ul>

                            <hr />

                            <p>
                                {% if (typeof description != 'undefined') { %}
                                    {{ description }}
                                {% } else { %}
                                    No description provided
                                {% } %}
                            </p>

                            <footer class="lists">
                                <ul class="tabs">
                                    <li class="tweets"><a href="javascript:void(0)">Tweets</a></li>
                                </ul>

                                <div class="talk-footer-content"></div>

                            </footer>
                        </section>
                    </article>
                </section>
            </div>
        </script>

        <script type="text/template" id="talks-list-template">
            <section id="talks">
                <table class="common-table">
                    <tbody>
                        {% _.each(days, function(talks, day) { %}
                            <tr>
                                <td class="date" colspan="4">{{ day }}</td>
                            </tr>
                            {% _.each(talks, function(talk, num) { %}
                                <tr>
                                    <td class="time">
                                        {% if (typeof talk.startsAt != 'undefined' ) { %}
                                            {{ dateFormat(talk.startsAt, 'h:MM') }}
                                        {% } else { %}
                                            x:xx
                                        {% } %}
                                    </td>
                                    <td class="name">
                                        <h5>
                                            <a href="#events/{{ talk.eventId }}/talks/{{ num }}">
                                                {% if (typeof talk.name !== 'undefined') { %}
                                                    {{ talk.name }}
                                                {% } else { %}
                                                    Noname
                                                {% } %}
                                            </a>
                                            {% if (typeof talk.hash !== 'undefined') { %}
                                                <small>{{ talk.hash }}</small>
                                            {% } %}
                                        </h5>
                                    </td>
                                    <td class="author">
                                        {% if (typeof talk.speakers !== 'undefined') { %}
                                            {% _.each(talk.speakers, function(speaker) { %}
                                                <a href="https://twitter.com/{{ speaker }}">
                                                    @{{ speaker }}
                                                </a>
                                            {% }); %}
                                        {% } else { %}
                                            anonymous
                                        {% } %}
                                    </td>
                                    <td class="tweets">
                                        {% if (typeof talk.tweets !== 'undefined') { %}
                                            {{ talk.tweets.length }}
                                        {% } else { %}
                                            0
                                        {% } %}
                                    </td>
                                </tr>
                            {% }); %}
                        {% }); %}
                    </tbody>
                </table>
            </section>
        </script>

        <script type="text/template" id="tweets-list-template">
            <section id="tweets">
                {% _.each(tweets, function(tweet) { %}
                    <div class="tweet">
                        {% if (typeof tweet.avatarUrl !== 'undefined') { %}
                            <img src="{{ tweet.avatarUrl }}"/>
                        {% } %}
                        {% if (typeof tweet.user !== 'undefined') { %}
                            <h5>{{ tweet.user }}</h5>
                        {% } %}
                        {% if (typeof tweet.tweet !== 'undefined') { %}
                            <p>{{ tweet.tweet }}</p>
                        {% } %}
                        {% if (typeof tweet.postedAt !== 'undefined') { %}
                            <span class="date">{{ dateFormat(tweet.postedAt, 'yyyy-mm-dd') }}</span>
                        {% } %}
                    </div>
                {% }); %}
            </section>
        </script>

        <script type="text/template" id="events-list-event-template">
            <header class="map">
                <span class="time">
                    {% if (typeof startsAt !== 'undefined') { %}
                        {{ dateFormat(startsAt, 'd mmmm') }}<br/>
                        <i>{{ dateFormat(startsAt, 'h:MM') }}</i>
                    {% } else { %}
                        anytime
                    {% } %}
                </span>
                {% if (typeof location != 'undefined') { %}
                    <img width="150" height="150" src="http://maps.google.com/maps/api/staticmap?center={{ location }}&zoom=13&size=150x150&sensor=false" />
                {% } else { %}
                    <img width="150" height="150" src="http://maps.google.com/maps/api/staticmap?center=Unknown&zoom=13&size=150x150&sensor=false" />
                {% } %}
            </header>
            <section>
                <h3>
                    <a href="#events/{{ _id }}">
                        {% if (typeof name !== 'undefined') { %}
                            {{ name }}
                        {% } else { %}
                            Noname
                        {% } %}
                    </a>
                    {% if (typeof hash !== 'undefined') { %}
                        <small>{{ hash }}</small>
                    {% } %}
                </h3>
                <p>{{ description }}</p>
                <ul class="infobar">
                    {% if (typeof startsAt !== 'undefined') { %}
                        <li class="time-precise">{{ dateFormat(startsAt, 'yyyy-mm-dd, h:MM') }}</li>
                    {% } %}
                    {% if (typeof participants !== 'undefined') { %}
                        <li class="people">{{ participants.length }}</li>
                    {% } %}
                    {% if (typeof tweetsCount !== 'undefined') { %}
                        <li class="tweets">{{ tweetsCount }}</li>
                    {% } %}
                    <li class="author">
                        {% if (typeof author !== 'undefined') { %}
                            <a href="https://twitter.com/{{ author }}">@{{ author }}</a>
                        {% } else { %}
                            anonymous
                        {% } %}
                    </li>
                </ul>
            </section>
        </script>

        <script type="text/template" id="events-list-template">
            <div id="events-list" class="row">
                <section class="span16 columns list">
                </section>
            </div>
        </script>

        <%- partial('eventFormTemplate') %>

    </head>
    <body>
        <div class="container">

            <%- partial('menu') %>

            <%- partial('flash') %>

            <div id="bb-content"></div>

            <script type="text/javascript">
                $(function(){
                    window.App.init();
                });
            </script>
        </div>
    </body>
</html>
